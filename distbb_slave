#!/bin/sh

set -e
. pipestatus

######################################################################

header (){
    printf ' --**--**-- %8s --**--**--\n' "$1"
}

######################################################################

usage (){
    cat <<EOF
usage: distbb_slave
EOF
}

if test $# -ne 0; then
    usage
    exit 1
fi

build_package (){
    for t in $TARGETS; do
	header build
	echo "stage $t...done"
    done
}

while read pkgpath; do
    if runpipe_re '. 0' build_package '|' uuencode -; then
	echo "status: $pipestatus_1"
    else
	echo "status: 1" # uuencode failed
    fi
    echo '' # end of task
done
