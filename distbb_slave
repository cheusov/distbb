#!/bin/sh

set -e
. pipestatus

######################################################################

header (){
    printf ' --**--**-- %8s --**--**--\n' "$1"
}

######################################################################

usage (){
    cat <<EOF
usage: distbb_slave
EOF
}

if test $# -ne 0; then
    usage
    exit 1
fi

build_package (){
    header build
    echo "building $pkgpath...done"
}

if test -z $queue_fn; then
    exit 2
fi

while read pkgpath; do
    echo "package: $pkgpath"
    if runpipe_re '. 0' build_package '|' uuencode -; then
	echo "status: $pipestatus_1"
    else
	echo "status: 1" # uuencode failed
    fi
    echo ''
done
